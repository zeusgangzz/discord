const _0x57ae=['AutoDeleteInChannel','The\x20URL\x20you\x20provided\x20did\x20not\x20match!','Description','GET','GiveRole','message','We\x20have\x20sent\x20you\x20a\x20DM','patreon','The\x20user\x20you\x20tagged\x20does\x20not\x20have\x20any\x20linked\x20accounts.\x20Tell\x20them\x20to\x20do\x20-link','banned','Commands','You\x20have\x20linked\x20your\x20account!','chalk','TruckersMPID','Other','What\x20is\x20your\x20TruckersMP\x20Profile\x20Link?','{avatar}','Messages','Commmand','waitForResponse','The\x20URL\x20you\x20provided\x20doesn\x27t\x20link\x20to\x20any\x20account.','Enabled','Command','sync','isPatron','send','add','member','UserID','groupColor','InvalidID','joinDate','Aliases','channel','groupName','Usage','Info','request-promise','The\x20URL\x20should\x20look\x20something\x20like\x20this\x20https://truckersmp.com/user/3189864\x0aPlease\x20rerun\x20the\x20command\x20to\x20connect\x20your\x20account.','link','Rank:\x20{rank}\x0aAccount\x20Created:\x20{created_at}\x0aTotal\x20Bans:\x20{total_bans}\x0aBanned:\x20{ban_check}\x0aSteam\x20Account:\x20[Click\x20Me](https://steamcommunity.com/profiles/{steamid}/)\x0aSteamID64:\x20{steamid64}\x0aPatron\x20Supporter:\x20{patron}','./addon_configs/TruckerMP.yml','setupEmbed','../modules/handlers/EventHandler','INSERT\x20INTO\x20user\x20(DiscordID,\x20TruckersMPID,\x20SteamID)\x20VALUES\x20(?,\x20?,\x20?)','Link','roles','tag','That\x20TruckersMP\x20account\x20is\x20already\x20linked.\x20Please\x20contact\x20an\x20Admin','replace','members','-info\x20<@>','bansCount','mentions','exports','AccountTaken','set','../modules/handlers/CommandHandler','AccountLinked','catch','SELECT\x20*\x20FROM\x20user\x20WHERE\x20DiscordID\x20=\x20?','You\x20do\x20not\x20have\x20any\x20accounts\x20linked.\x20Please\x20run\x20-link','lookup','{groupColor}','TruckerMP.sqlite','InfoAccount','{name}\x27s\x20TruckersMP','general','General\x20Info','steamID64','get','statusCode','linkaccount','content','-link','VerifictionSystem','memberID','*How\x20do\x20I\x20get\x20my\x20TruckersMP\x20ID?\x0aStep\x201.\x20Sign\x20in\x20on\x20https://truckersmp.com/\x0aStep\x202.\x20Go\x20to\x20this\x20link\x20https://truckersmp.com/profile\x0aStep\x203.\x20Copy\x20the\x20URL\x20at\x20the\x20top\x20of\x20your\x20screen\x20(Example:\x20https://truckersmp.com/user/3189864)*\x0aStep\x204.\x20Send\x20me\x20the\x20URl\x20you\x20just\x20copied!','avatar','first','author','vtc','response','SelfNoAccount','prepare','name','https://api.truckersmp.com/v2/player/','remove','VTC\x20Info','InvalidURL','then','OnVerify','TaggedUser','NoTag','ID:\x20{vtc_id}\x0aName:\x20{vtc_name}\x0aTag:\x20{vtc_tag}\x0aMember\x20ID:\x20{vtc_member_id}','https://truckersmp.com/user/','ChannelID','RoleID','error','DMSent','Allows\x20you\x20to\x20link\x20your\x20TruckersMP\x20account\x20to\x20discord.','steamID','../modules/utils'];(function(_0x1793a0,_0x57d356){const _0x57ae5e=function(_0x578279){while(--_0x578279){_0x1793a0['push'](_0x1793a0['shift']());}};_0x57ae5e(++_0x57d356);}(_0x57ae,0x1ab));const _0x5782=function(_0x1793a0,_0x57d356){_0x1793a0=_0x1793a0-0x1c5;let _0x57ae5e=_0x57ae[_0x1793a0];return _0x57ae5e;};const _0x4aea35=_0x5782,Discord=require('discord.js'),CommandHandler=require(_0x4aea35(0x1ef)),Utils=require(_0x4aea35(0x21c));var request=require(_0x4aea35(0x1db));let db=require('better-sqlite3')(_0x4aea35(0x1f6));const EventHandler=require(_0x4aea35(0x1e1)),chalk=require(_0x4aea35(0x229));module[_0x4aea35(0x1ec)]=async _0x2c25d4=>{const _0xf06d2=_0x4aea35,_0x5ddcfe=require('../modules/CustomConfig.js'),_0x5ee813=new _0x5ddcfe(_0xf06d2(0x1df),{'VerifictionSystem':{'AutoDeleteInChannel':{'Enabled':![],'ChannelID':''},'OnVerify':{'GiveRole':{'Enabled':![],'RoleID':'775022245449433103'},'RemoveRole':{'Enabled':![],'RoleID':'775045090920890398'}}},'Commands':{'Link':{'Commmand':_0xf06d2(0x1dd),'Description':_0xf06d2(0x21a),'Usage':_0xf06d2(0x200),'Aliases':[_0xf06d2(0x1cd),_0xf06d2(0x1fe)],'Type':'Other','Messages':{'DMSent':{'Author':_0xf06d2(0x223)},'UserID':{'Author':_0xf06d2(0x1c5),'Description':_0xf06d2(0x203)},'AccountTaken':{'Author':_0xf06d2(0x1e6)},'InvalidURL':{'Author':_0xf06d2(0x21e),'Description':_0xf06d2(0x1dc)},'InvalidID':{'Author':_0xf06d2(0x1ca)},'AccountLinked':{'Author':_0xf06d2(0x228)},'InfoAccount':{'Author':_0xf06d2(0x1f8),'Thumbnail':'{avatar}','Color':'{groupColor}','Fields':[{'name':_0xf06d2(0x1fa),'value':'Rank:\x20{rank}\x0aAccount\x20Created:\x20{created_at}\x0aTotal\x20Bans:\x20{total_bans}\x0aBanned:\x20{ban_check}\x0aSteam\x20Account:\x20[Click\x20Me](https://steamcommunity.com/profiles/{steamid}/)\x0aSteamID64:\x20{steamid64}\x0aPatron\x20Supporter:\x20{patron}','inline':!![]},{'name':_0xf06d2(0x20e),'value':_0xf06d2(0x214),'inline':!![]}]}}},'Info':{'Command':_0xf06d2(0x1da),'Description':'Allows\x20you\x20to\x20search\x20for\x20a\x20users\x20TruckersMP\x20Account','Usage':_0xf06d2(0x1e9),'Aliases':[_0xf06d2(0x1f4)],'Type':_0xf06d2(0x22b),'Messages':{'TaggedUser':{'Author':_0xf06d2(0x1f8),'Thumbnail':_0xf06d2(0x1c6),'Color':_0xf06d2(0x1f5),'Fields':[{'name':'General\x20Info','value':'Rank:\x20{rank}\x0aAccount\x20Created:\x20{created_at}\x0aTotal\x20Bans:\x20{total_bans}\x0aBanned:\x20{ban_check}\x0aSteam\x20Account:\x20[Click\x20Me](https://steamcommunity.com/profiles/{steamid}/)\x0aSteamID64:\x20{steamid64}\x0aPatron\x20Supporter:\x20{patron}','inline':!![]},{'name':_0xf06d2(0x20e),'value':'ID:\x20{vtc_id}\x0aName:\x20{vtc_name}\x0aTag:\x20{vtc_tag}\x0aMember\x20ID:\x20{vtc_member_id}','inline':!![]}]},'NoTag':{'Author':'{name}\x27s\x20TruckersMP','Thumbnail':_0xf06d2(0x1c6),'Color':'{groupColor}','Fields':[{'name':'General\x20Info','value':_0xf06d2(0x1de),'inline':!![]},{'name':_0xf06d2(0x20e),'value':_0xf06d2(0x214),'inline':!![]}]},'SelfNoAccount':{'Author':_0xf06d2(0x1f3)},'TagNoAccount':{'Author':_0xf06d2(0x225)}}}}});EventHandler['set'](_0xf06d2(0x222),(_0xcf7e37,_0x5a7421)=>{const _0xad941c=_0xf06d2;_0x5ee813[_0xad941c(0x201)][_0xad941c(0x21d)][_0xad941c(0x1cb)]&&(_0x5a7421[_0xad941c(0x1d7)]['id']===''+_0x5ee813['VerifictionSystem'][_0xad941c(0x21d)][_0xad941c(0x216)]&&_0x5a7421['delete']());}),db[_0xf06d2(0x20a)]('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20user(DiscordID\x20INTEGER,\x20TruckersMPID\x20INTEGER,\x20SteamID\x20INTEGER)')['run'](),CommandHandler['set']({'name':_0x5ee813[_0xf06d2(0x227)][_0xf06d2(0x1e3)][_0xf06d2(0x1c8)],'run':async(_0x15b85c,_0x444d8b,_0x247b97)=>{const _0x506ebd=_0xf06d2;let _0x417072=db[_0x506ebd(0x20a)]('SELECT\x20*\x20FROM\x20user\x20WHERE\x20DiscordID\x20=\x20?')[_0x506ebd(0x1fc)](_0x444d8b['author']['id']);if(_0x417072)_0x444d8b[_0x506ebd(0x1d7)][_0x506ebd(0x1cf)](Utils[_0x506ebd(0x1e0)]({'configPath':_0x5ee813[_0x506ebd(0x227)]['Link']['Messages'][_0x506ebd(0x1ed)]}));else{let _0x361106=await _0x444d8b['channel'][_0x506ebd(0x1cf)](Utils[_0x506ebd(0x1e0)]({'configPath':_0x5ee813[_0x506ebd(0x227)]['Link']['Messages'][_0x506ebd(0x219)]})),_0x33d5f6=await _0x444d8b['author'][_0x506ebd(0x1cf)](Utils[_0x506ebd(0x1e0)]({'configPath':_0x5ee813['Commands'][_0x506ebd(0x1e3)][_0x506ebd(0x1c7)][_0x506ebd(0x1d2)]}));AccountID=await Utils[_0x506ebd(0x1c9)](_0x444d8b[_0x506ebd(0x206)]['id'],_0x33d5f6[_0x506ebd(0x1d7)]),console['log'](AccountID[_0x506ebd(0x1ff)][_0x506ebd(0x1e7)]('https://truckersmp.com/user/',''));let _0x35085e=AccountID[_0x506ebd(0x1ff)][_0x506ebd(0x1e7)](_0x506ebd(0x215),'');request({'method':'GET','uri':'https://api.truckersmp.com/v2/player/'+_0x35085e,'json':!![]})['then'](_0xea75f1=>{const _0x5214cb=_0x506ebd;if(!_0xea75f1[_0x5214cb(0x218)]){if(_0x5ee813[_0x5214cb(0x201)][_0x5214cb(0x211)][_0x5214cb(0x221)][_0x5214cb(0x1cb)])_0x444d8b[_0x5214cb(0x1d1)][_0x5214cb(0x1e4)][_0x5214cb(0x1d0)](_0x5ee813['VerifictionSystem'][_0x5214cb(0x221)][_0x5214cb(0x217)]);if(_0x5ee813[_0x5214cb(0x201)]['OnVerify']['RemoveRole'][_0x5214cb(0x1cb)])_0x444d8b[_0x5214cb(0x1d1)][_0x5214cb(0x1e4)][_0x5214cb(0x20d)](_0x5ee813[_0x5214cb(0x201)]['RemoveRole'][_0x5214cb(0x217)]);db['prepare'](_0x5214cb(0x1e2))['run'](_0x444d8b['author']['id'],_0xea75f1[_0x5214cb(0x208)]['id'],_0xea75f1[_0x5214cb(0x208)][_0x5214cb(0x21b)]),_0x33d5f6[_0x5214cb(0x1d7)][_0x5214cb(0x1cf)](Utils[_0x5214cb(0x1e0)]({'configPath':_0x5ee813[_0x5214cb(0x227)][_0x5214cb(0x1e3)]['Messages'][_0x5214cb(0x1f0)]})),_0x33d5f6[_0x5214cb(0x1d7)][_0x5214cb(0x1cf)](Utils[_0x5214cb(0x1e0)]({'configPath':_0x5ee813['Commands'][_0x5214cb(0x1e3)][_0x5214cb(0x1c7)]['InfoAccount'],'variables':[{'searchFor':/{name}/g,'replaceWith':data[_0x5214cb(0x20b)]},{'searchFor':/{color}/g,'replaceWith':data[_0x5214cb(0x1d3)]},{'searchFor':/{rank}/g,'replaceWith':data[_0x5214cb(0x1d8)]},{'searchFor':/{created_at}/g,'replaceWith':data[_0x5214cb(0x1d5)]},{'searchFor':/{avatar}/g,'replaceWith':data['avatar']},{'searchFor':/{total_bans}/g,'replaceWith':data['bansCount']},{'searchFor':/{ban_check}/g,'replaceWith':data[_0x5214cb(0x226)]},{'searchFor':/{steamid}/g,'replaceWith':data[_0x5214cb(0x21b)]},{'searchFor':/{steamid64}/g,'replaceWith':data[_0x5214cb(0x1fb)]},{'searchFor':/{patron}/g,'replaceWith':data[_0x5214cb(0x224)][_0x5214cb(0x1ce)]},{'searchFor':/{vtc_id}/g,'replaceWith':data['vtc']['id']},{'searchFor':/{vtc_name}/g,'replaceWith':data[_0x5214cb(0x207)][_0x5214cb(0x20b)]},{'searchFor':/{vtc_tag}/g,'replaceWith':data[_0x5214cb(0x207)][_0x5214cb(0x1e5)]},{'searchFor':/{vtc_member.id}/g,'replaceWith':data[_0x5214cb(0x207)]['memberID']}]})),_0x361106['edit'](Utils[_0x5214cb(0x1e0)]({'configPath':_0x5ee813[_0x5214cb(0x227)][_0x5214cb(0x1e3)][_0x5214cb(0x1c7)][_0x5214cb(0x1f7)],'variables':[{'searchFor':/{name}/g,'replaceWith':data[_0x5214cb(0x20b)]},{'searchFor':/{color}/g,'replaceWith':data['groupColor']},{'searchFor':/{rank}/g,'replaceWith':data[_0x5214cb(0x1d8)]},{'searchFor':/{created_at}/g,'replaceWith':data[_0x5214cb(0x1d5)]},{'searchFor':/{avatar}/g,'replaceWith':data[_0x5214cb(0x204)]},{'searchFor':/{total_bans}/g,'replaceWith':data[_0x5214cb(0x1ea)]},{'searchFor':/{ban_check}/g,'replaceWith':data['banned']},{'searchFor':/{steamid}/g,'replaceWith':data[_0x5214cb(0x21b)]},{'searchFor':/{steamid64}/g,'replaceWith':data['steamID64']},{'searchFor':/{patron}/g,'replaceWith':data[_0x5214cb(0x224)][_0x5214cb(0x1ce)]},{'searchFor':/{vtc_id}/g,'replaceWith':data[_0x5214cb(0x207)]['id']},{'searchFor':/{vtc_name}/g,'replaceWith':data[_0x5214cb(0x207)][_0x5214cb(0x20b)]},{'searchFor':/{vtc_tag}/g,'replaceWith':data[_0x5214cb(0x207)][_0x5214cb(0x1e5)]},{'searchFor':/{vtc_member.id}/g,'replaceWith':data[_0x5214cb(0x207)][_0x5214cb(0x202)]}]}));}else return _0x444d8b['author'][_0x5214cb(0x1cf)](Utils['setupEmbed']({'configPath':_0x5ee813['Commands'][_0x5214cb(0x1e3)][_0x5214cb(0x1c7)][_0x5214cb(0x1d4)]}));})[_0x506ebd(0x1f1)](_0x4de0c1=>{const _0x1222ee=_0x506ebd;if(_0x4de0c1[_0x1222ee(0x1fd)]==0x194)return _0x444d8b[_0x1222ee(0x206)]['send'](Utils[_0x1222ee(0x1e0)]({'configPath':_0x5ee813[_0x1222ee(0x227)]['Link'][_0x1222ee(0x1c7)][_0x1222ee(0x20f)]}));console['log'](_0x4de0c1);});}},'description':_0x5ee813[_0xf06d2(0x227)][_0xf06d2(0x1e3)]['Description'],'usage':_0x5ee813[_0xf06d2(0x227)][_0xf06d2(0x1e3)][_0xf06d2(0x1d9)],'aliases':_0x5ee813['Commands'][_0xf06d2(0x1e3)][_0xf06d2(0x1d6)],'type':_0xf06d2(0x1f9)}),CommandHandler[_0xf06d2(0x1ee)]({'name':_0x5ee813[_0xf06d2(0x227)][_0xf06d2(0x1da)][_0xf06d2(0x1cc)],'run':async(_0x1c1967,_0x5bd0f4,_0x3b5105)=>{const _0x59f6d3=_0xf06d2;let _0x14c6ad=_0x5bd0f4[_0x59f6d3(0x1eb)][_0x59f6d3(0x1e8)][_0x59f6d3(0x205)]();if(!_0x14c6ad){let _0x420552=db['prepare'](_0x59f6d3(0x1f2))[_0x59f6d3(0x1fc)](_0x5bd0f4[_0x59f6d3(0x206)]['id']);if(_0x420552)request({'method':'GET','uri':'https://api.truckersmp.com/v2/player/'+_0x420552[_0x59f6d3(0x22a)],'json':!![]})[_0x59f6d3(0x210)](_0x20daf9=>{const _0x103c7a=_0x59f6d3;let _0x5e6b12=_0x20daf9['response'];_0x5bd0f4[_0x103c7a(0x1d7)]['send'](Utils[_0x103c7a(0x1e0)]({'configPath':_0x5ee813[_0x103c7a(0x227)]['Info'][_0x103c7a(0x1c7)][_0x103c7a(0x213)],'variables':[{'searchFor':/{name}/g,'replaceWith':_0x5e6b12[_0x103c7a(0x20b)]},{'searchFor':/{color}/g,'replaceWith':_0x5e6b12[_0x103c7a(0x1d3)]},{'searchFor':/{rank}/g,'replaceWith':_0x5e6b12[_0x103c7a(0x1d8)]},{'searchFor':/{created_at}/g,'replaceWith':_0x5e6b12[_0x103c7a(0x1d5)]},{'searchFor':/{avatar}/g,'replaceWith':_0x5e6b12[_0x103c7a(0x204)]},{'searchFor':/{total_bans}/g,'replaceWith':_0x5e6b12[_0x103c7a(0x1ea)]},{'searchFor':/{ban_check}/g,'replaceWith':_0x5e6b12[_0x103c7a(0x226)]},{'searchFor':/{steamid}/g,'replaceWith':_0x5e6b12[_0x103c7a(0x21b)]},{'searchFor':/{steamid64}/g,'replaceWith':_0x5e6b12[_0x103c7a(0x1fb)]},{'searchFor':/{patron}/g,'replaceWith':_0x5e6b12[_0x103c7a(0x224)][_0x103c7a(0x1ce)]},{'searchFor':/{vtc_id}/g,'replaceWith':_0x5e6b12['vtc']['id']},{'searchFor':/{vtc_name}/g,'replaceWith':_0x5e6b12[_0x103c7a(0x207)][_0x103c7a(0x20b)]},{'searchFor':/{vtc_tag}/g,'replaceWith':_0x5e6b12[_0x103c7a(0x207)]['tag']},{'searchFor':/{vtc_member.id}/g,'replaceWith':_0x5e6b12['vtc']['memberID']}]}));});else return _0x5bd0f4['channel']['send'](Utils['setupEmbed']({'configPath':_0x5ee813[_0x59f6d3(0x227)][_0x59f6d3(0x1da)]['Messages'][_0x59f6d3(0x209)]}));}else{let _0xf256fa=db[_0x59f6d3(0x20a)](_0x59f6d3(0x1f2))[_0x59f6d3(0x1fc)](_0x14c6ad['id']);if(!_0xf256fa)return _0x5bd0f4[_0x59f6d3(0x1d7)][_0x59f6d3(0x1cf)](Utils[_0x59f6d3(0x1e0)]({'configPath':_0x5ee813[_0x59f6d3(0x227)][_0x59f6d3(0x1da)]['Messages']['TagNoAccount']}));else request({'method':_0x59f6d3(0x220),'uri':_0x59f6d3(0x20c)+_0xf256fa[_0x59f6d3(0x22a)],'json':!![]})[_0x59f6d3(0x210)](_0x43a1cb=>{const _0x225120=_0x59f6d3;let _0x57f869=_0x43a1cb[_0x225120(0x208)];_0x5bd0f4['channel'][_0x225120(0x1cf)](Utils['setupEmbed']({'configPath':_0x5ee813[_0x225120(0x227)][_0x225120(0x1da)][_0x225120(0x1c7)][_0x225120(0x212)],'variables':[{'searchFor':/{name}/g,'replaceWith':_0x57f869['name']},{'searchFor':/{color}/g,'replaceWith':_0x57f869[_0x225120(0x1d3)]},{'searchFor':/{rank}/g,'replaceWith':_0x57f869['groupName']},{'searchFor':/{created_at}/g,'replaceWith':_0x57f869[_0x225120(0x1d5)]},{'searchFor':/{avatar}/g,'replaceWith':_0x57f869[_0x225120(0x204)]},{'searchFor':/{total_bans}/g,'replaceWith':_0x57f869[_0x225120(0x1ea)]},{'searchFor':/{ban_check}/g,'replaceWith':_0x57f869[_0x225120(0x226)]},{'searchFor':/{steamid}/g,'replaceWith':_0x57f869['steamID']},{'searchFor':/{steamid64}/g,'replaceWith':_0x57f869[_0x225120(0x1fb)]},{'searchFor':/{patron}/g,'replaceWith':_0x57f869[_0x225120(0x224)][_0x225120(0x1ce)]},{'searchFor':/{vtc_id}/g,'replaceWith':_0x57f869[_0x225120(0x207)]['id']},{'searchFor':/{vtc_name}/g,'replaceWith':_0x57f869[_0x225120(0x207)][_0x225120(0x20b)]},{'searchFor':/{vtc_tag}/g,'replaceWith':_0x57f869[_0x225120(0x207)]['tag']},{'searchFor':/{vtc_member.id}/g,'replaceWith':_0x57f869[_0x225120(0x207)][_0x225120(0x202)]}]}));});}},'description':_0x5ee813[_0xf06d2(0x227)][_0xf06d2(0x1da)][_0xf06d2(0x21f)],'usage':_0x5ee813[_0xf06d2(0x227)]['Info'][_0xf06d2(0x1d9)],'aliases':_0x5ee813[_0xf06d2(0x227)][_0xf06d2(0x1da)][_0xf06d2(0x1d6)],'Type':_0xf06d2(0x1f9)});};